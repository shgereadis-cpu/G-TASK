{% include 'header.html' %}

<div class="admin-dashboard-layout">
    <div class="header-admin">
        <i class="fas fa-hand-holding-usd"></i> ·ã®·ä≠·çç·ã´ ·ä†·àµ·â∞·ã≥·ã∞·à≠
        <p>·ä®·à∞·à´·â∞·äû·âΩ ·ã®·âÄ·à®·â° ·ã®·ä≠·çç·ã´ ·å•·ã´·âÑ·ãé·âΩ·äï ·ã≠·åà·àù·åç·àô ·ä•·äì ·ã≠·çà·åΩ·àô·ç¢</p>
    </div>

    <div class="card verification-table">
        <h3><i class="fas fa-list-alt"></i> ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àâ ·ã®·ä≠·çç·ã´ ·å•·ã´·âÑ·ãé·âΩ</h3>
        
        {% if payout_requests %}
        <div style="overflow-x: auto;">
            {% for payout in payout_requests %}
            <div class="payout-detail-card" style="margin-bottom: 20px; padding: 20px; border: 1px solid var(--border-light); border-radius: 8px; background: var(--cream-bg);">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-user"></i> ·à∞·à´·â∞·äõ
                        </label>
                        <p style="margin: 5px 0; font-size: 1.1em;">{{ payout.worker_username }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-coins"></i> ·àò·å†·äï (·â•·à≠)
                        </label>
                        <p style="margin: 5px 0; font-size: 1.1em; color: var(--success-color); font-weight: 700;">
                            ·â•·à≠ {{ "%.2f"|format(payout.amount) }}
                        </p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-user-check"></i> ·ã®·ä†·ä´·ãç·äï·âµ ·â£·àà·â§·âµ ·àµ·àù
                        </label>
                        <p style="margin: 5px 0;">{{ payout.recipient_name }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-credit-card"></i> ·ä≠·çç·ã´ ·ãò·ã¥
                        </label>
                        <p style="margin: 5px 0;">
                            {% if payout.payment_method == 'Telebirr' %}
                                üì± Telebirr
                            {% elif payout.payment_method == 'CBE' %}
                                üè¶ ·äï·åç·ãµ ·â£·äï·ä≠
                            {% elif payout.payment_method == 'M-Pesa' %}
                                üí≥ M-Pesa
                            {% else %}
                                {{ payout.payment_method }}
                            {% endif %}
                        </p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-phone"></i> ·ä≠·çç·ã´ ·àò·à®·åÉ
                        </label>
                        <p style="margin: 5px 0; font-family: monospace;">{{ payout.payment_details }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-wallet"></i> Wallet ·ä†·ãµ·à´·àª
                        </label>
                        <p style="margin: 5px 0; font-family: monospace; font-size: 0.9em; word-break: break-all;">
                            {{ payout.wallet_address if payout.wallet_address else '·ä†·àç·â∞·âÄ·àò·å†·àù' }}
                        </p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-calendar"></i> ·ã®·â∞·å†·ã®·âÄ·â†·âµ ·âÄ·äï
                        </label>
                        <p style="margin: 5px 0;">{{ payout.date_requested.strftime('%Y-%m-%d %H:%M') if payout.date_requested else 'N/A' }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--primary-color);">
                            <i class="fas fa-cogs"></i> ·ä•·à≠·àù·åÉ·ãé·âΩ
                        </label>
                        <div class="action-buttons" style="margin-top: 5px;">
                            <form method="POST" action="{{ url_for('admin_action_payout', payout_id=payout.payout_id, action='paid') }}" style="display: inline;">
                                <button type="submit" class="btn success btn-small">
                                    <i class="fas fa-check-circle"></i> ·â∞·çà·åΩ·àü·àç
                                </button>
                            </form>
                            <form method="POST" action="{{ url_for('admin_action_payout', payout_id=payout.payout_id, action='reject') }}" style="display: inline;">
                                <button type="submit" class="btn danger btn-small">
                                    <i class="fas fa-times-circle"></i> ·ä†·âµ·âÄ·â†·àç
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="text-align: center; padding: 40px 20px; color: var(--text-light);">
            <i class="fas fa-inbox"></i><br>
            ·â†·ä†·àÅ·äë ·à∞·ãì·âµ ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àà ·ã®·ä≠·çç·ã´ ·å•·ã´·âÑ ·ã®·àà·àù·ç¢
        </p>
        {% endif %}
    </div>

    <div style="margin-top: 25px; text-align: center;">
        <a href="{{ url_for('admin_dashboard') }}" class="btn secondary">
            <i class="fas fa-arrow-left"></i> ·ãà·ã∞ ·ä†·àµ·â∞·ã≥·ã≥·à™ ·ã≥·àΩ·â¶·à≠·ãµ ·ã≠·àò·àà·à±
        </a>
    </div>
</div>

{% include 'footer.html' %}
